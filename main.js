(()=>{"use strict";function e(e){const t=new kakao.maps.services.Geocoder;return new Promise(((a,n)=>{t.addressSearch(e,(function(e,t){if(t===kakao.maps.services.Status.OK){const{x:t,y:n}=e[0];a([t,n])}else n(t)}))}))}(async()=>{const t=await async function(){const e=document.getElementById("staticMap"),t={center:new kakao.maps.LatLng(37.5691888810787,126.997678048457),level:3};return new kakao.maps.Map(e,t)}();!function(e){const t=document.querySelector(".nav-item.item-user"),a=document.querySelector(".nav-item.item-map-location-result"),n=document.querySelector(".section-search"),o=document.querySelector(".search-user-list"),s=n.querySelector(".input-name"),c=n.querySelector(".input-addr"),i=[];t.addEventListener("click",(()=>{n.classList.toggle("is-active")})),c.addEventListener("click",(()=>{if(0===s.value.length)return alert("참석자의 이름을 먼저 입력해주세요."),void s.focus();const t=s.value;new daum.Postcode({width:400,height:500,oncomplete:function(n){(new kakao.maps.services.Geocoder).addressSearch(n.address,(function(a,n){if(n===kakao.maps.services.Status.OK){const n=new kakao.maps.Marker({map:e,position:new kakao.maps.LatLng(a[0].y,a[0].x)});new kakao.maps.InfoWindow({content:`<div class='info-window' data-lng=${a[0].x} data-lat=${a[0].y}>${t}</div>`}).open(e,n),i.push({position:new kakao.maps.LatLng(a[0].y,a[0].x)});const o=new kakao.maps.LatLngBounds;i.forEach((e=>{o.extend(e.position)})),e.setBounds(o)}})),(({name:e,addr:t})=>{const a=document.createElement("li"),n=document.createElement("strong"),s=document.createElement("p");n.textContent=e,s.textContent=t,a.appendChild(n),a.appendChild(s),o.appendChild(a)})({name:t,addr:n.address}),s.value="",c.value="",o.childElementCount>1&&a.classList.add("is-active")}}).open({left:500,top:200})}))}(t),function(e,t){const a=document.querySelector(".section-search"),n=document.querySelector(".section-result"),o=n.querySelector(".result-title"),s=n.querySelector(".result-list"),c=document.querySelector(".nav-item.item-map-location-result"),i=document.querySelector(".search-user-list");let r,d=[],l=[];const p=()=>{const a={center:r,radius:2e3,strokeWeight:5,strokeColor:"#75B8FA",strokeOpacity:1,strokeStyle:"dashed",fillColor:"#CFE7FF",fillOpacity:.7},n=new kakao.maps.Circle(a),o=n.getPosition(),s=n.getRadius(),c=new kakao.maps.Polyline;n.setMap(t),e.forEach((e=>{const{역명:a,위도:n,경도:i}=e,r=new kakao.maps.LatLng(i,n);c.setPath([r,o]),c.getLength()<=s&&(new kakao.maps.Marker({position:r,map:t}),k(a,n,i),d.push(e))}))},u=()=>{const e=document.createDocumentFragment();d.forEach(((t,a)=>{const n=document.createElement("li"),o=document.createElement("button"),s=document.createElement("span"),c=document.createElement("div"),i=document.createElement("strong"),r=document.createElement("p");o.setAttribute("type","button"),i.textContent=`${t.역명}역`,r.textContent=`${t.호선}호선`,c.appendChild(i),c.appendChild(r),o.appendChild(s),o.appendChild(c),n.appendChild(o),e.appendChild(n),o.addEventListener("click",(e=>m(e,a)))})),s.appendChild(e)},m=(e,t)=>{e.stopPropagation(),[...s.querySelectorAll("button")].forEach((e=>e.classList.remove("is-active"))),e.currentTarget.classList.add("is-active"),h(t)},k=(e,t,a)=>{const n=`<div class="info-subway">${e}역</div>`,o=new kakao.maps.InfoWindow({position:new kakao.maps.LatLng(a,t),content:n});l.push(o)},h=e=>{l.forEach((e=>e.setMap(null))),l[e].setMap(t)};c.addEventListener("click",(()=>{i.childElementCount<2?alert("참석자를 2명 이상 추가해주세요"):(a.classList.remove("is-active"),n.classList.add("is-active"),(()=>{const e=[...document.querySelectorAll(".info-window")].map((e=>{const t=e.getAttribute("data-lng"),a=e.getAttribute("data-lat");return{position:new kakao.maps.LatLng(a,t)}})),a=e[0].position.La,n=e[0].position.Ma,o=e[1].position.La,s=e[1].position.Ma,c=(a+o)/2,i=(n+s)/2;r=new kakao.maps.LatLng(i,c);const d=[new kakao.maps.LatLng(n,a),new kakao.maps.LatLng(s,o),new kakao.maps.LatLng(i,c)];new kakao.maps.Polyline({path:d,strokeWeight:5,strokeColor:"#FFAE00",strokeOpacity:.7,strokeStyle:"solid"}).setMap(t),p(),u()})())})),o.addEventListener("click",(()=>{n.classList.toggle("is-expanded")}))}(await async function(t=1){let a=[];const n=t,o=await fetch(`https://api.odcloud.kr/api/15044231/v1/uddi:0f4be2a7-5b71-4d53-acf1-de4b6b8f6e5d?page=${n}&perPage=288&serviceKey=XXqQ%2BC3B7%2FwqSQWPoNnpzObB6WexRJXlt%2B0qbfzV%2BnJqVUDeFdVf6v8GW8UYDuu14la6Bxj8O3UpNMs6TfeC4w%3D%3D`),s=await o.json();for(const t of s.data){const[n,o]=await e(t["도로명주소"]);a.push({...t,위도:n,경도:o})}return a}(),t)})()})();