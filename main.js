(()=>{"use strict";function e(e){const t=new kakao.maps.services.Geocoder;return new Promise(((n,a)=>{t.addressSearch(e,(function(e,t){if(t===kakao.maps.services.Status.OK){const{x:t,y:a}=e[0];n([t,a])}else a(t)}))}))}(async()=>{!function(e,t){const n=document.querySelector(".container"),a=n.querySelector(".list-participants"),o=n.querySelector(".section-result .result-list"),s=document.querySelector(".modal"),c=s.querySelector(".input-name"),i=s.querySelector(".input-addr"),r=s.querySelector(".btn-close"),d=(document.querySelector(".btn-add-participant"),document.querySelector(".btn-calc-distance"));let l,p=0,u=0;const m=[],k=[];let v=[],L=[];d.addEventListener("click",(function(){document.querySelector(".section-result").classList.add("is-active");const e=k[0].position.La,n=k[0].position.Ma,a=k[1].position.La,o=k[1].position.Ma,s=(e+a)/2,c=(n+o)/2;l=new kakao.maps.LatLng(c,s),new kakao.maps.Marker({map:t,position:l});for(var i=0;i<k.length;i++)new kakao.maps.Marker({map:t,position:k[i].position});let r=new kakao.maps.LatLngBounds;k.forEach((e=>{r.extend(e.position)})),t.setBounds(r);var d=[new kakao.maps.LatLng(n,e),new kakao.maps.LatLng(o,a),new kakao.maps.LatLng(c,s)],p=new kakao.maps.Polyline({path:d,strokeWeight:5,strokeColor:"#FFAE00",strokeOpacity:.7,strokeStyle:"solid"});h(),f(),p.setMap(t)})),r.addEventListener("click",(function(){const e={name:c.value,addr:i.value};m.push(e),c.value="",i.value="",function({name:e,addr:t}){const n=document.createElement("li"),o=document.createElement("div"),s=document.createElement("div");o.textContent=e,s.textContent=t,n.appendChild(o),n.appendChild(s),a.appendChild(n)}(e)})),i.addEventListener("focus",(function(e){const t=e.target;new daum.Postcode({oncomplete:function(e){(new kakao.maps.services.Geocoder).addressSearch(e.address,(function(e,t){t===kakao.maps.services.Status.OK&&(u=e[0].y,p=e[0].x,k.push({position:new kakao.maps.LatLng(u,p)}),console.log(k))})),t.value=e.address}}).open(),r.focus()}));const h=()=>{const n={center:l,radius:2e3,strokeWeight:5,strokeColor:"#75B8FA",strokeOpacity:1,strokeStyle:"dashed",fillColor:"#CFE7FF",fillOpacity:.7},a=new kakao.maps.Circle(n),o=a.getPosition(),s=a.getRadius(),c=new kakao.maps.Polyline;a.setMap(t),e.forEach((e=>{const{위도:n,경도:a}=e,i=new kakao.maps.LatLng(a,n);c.setPath([i,o]),c.getLength()<=s&&(new kakao.maps.Marker({position:i,map:t}),g(e),v.push(e),console.log(v))}))},f=()=>{const e=document.createDocumentFragment();v.forEach(((t,n)=>{const a=document.createElement("li"),o=document.createElement("button");o.type="button",o.textContent=`${t.역명}역`,a.appendChild(o),e.appendChild(a),o.addEventListener("click",(()=>y(t)))})),o.appendChild(e)},y=e=>{[...o.querySelectorAll("button")].forEach((e=>e.classList.remove("is-active"))),event.currentTarget.classList.add("is-active"),w(e)},g=({경도:e,위도:t})=>{const n=new kakao.maps.CustomOverlay({position:new kakao.maps.LatLng(e,t),content:'<div class="info-window">유저</div>',xAnchor:.3,yAnchor:.91});L.push(n)},w=e=>{const t=n.querySelector(".modal-detail"),a=(({역명:e,도로명주소:t,역전화번호:n,호선:a})=>{const o=document.createElement("aside"),s=document.createElement("h2"),c=document.createElement("button");o.classList.add("modal-detail"),s.classList.add("detail-title"),c.classList.add("btn-close"),c.type="button",s.textContent=`${e}역`,c.textContent="닫기";const i=`\n        <div class="detail-item is-transfer">\n            <strong>환승역</strong>\n            <ul>\n                <li>${a}호선</li>\n            </ul>\n        </div>\n\n        <div class="detail-item is-address">\n            <strong>도로명 주소</strong>\n            <p>${t}</p>\n        </div>\n\n        <div class="detail-item is-phone">\n            <strong>전화번호</strong>\n            <p>${n}</p>\n        </div>\n    `;return o.appendChild(s),o.innerHTML+=i,o.appendChild(c),c.addEventListener("click",(()=>C(o))),o})(e);t?.remove(),n.querySelector(".section-result").appendChild(a),a.classList.add("is-active")},C=e=>{e.remove()}}(await async function(t=1){let n=[];const a=t,o=await fetch(`https://api.odcloud.kr/api/15044231/v1/uddi:0f4be2a7-5b71-4d53-acf1-de4b6b8f6e5d?page=${a}&perPage=288&serviceKey=XXqQ%2BC3B7%2FwqSQWPoNnpzObB6WexRJXlt%2B0qbfzV%2BnJqVUDeFdVf6v8GW8UYDuu14la6Bxj8O3UpNMs6TfeC4w%3D%3D`),s=await o.json();for(const t of s.data){const[a,o]=await e(t["도로명주소"]);n.push({...t,위도:a,경도:o})}return n}(),await async function(){document.querySelector(".section-result");const e=document.getElementById("staticMap"),t={center:new kakao.maps.LatLng(37.5691888810787,126.997678048457),level:3};return new kakao.maps.Map(e,t)}())})()})();